/*!
 * icojs v0.14.0
 * (c) egy186
 * https://github.com/egy186/icojs/blob/master/LICENSE
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,function(){var r=t.ICO,n=t.ICO=e();n.noConflict=function(){return t.ICO=r,n}}())}(this,function(){"use strict";var t="image/png",e=t,r=function(t){for(var e=atob(t.replace(/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+,/,"")),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r.buffer},n={decode:function(t){return new Promise(function(e){var r=URL.createObjectURL(new Blob([t])),n=document.createElement("img");n.src=r,n.onload=function(){var t=n.naturalHeight,r=n.naturalWidth,i=document.createElement("canvas");i.width=r,i.height=t;var o=i.getContext("2d");o.drawImage(n,0,0);var a=o.getImageData(0,0,r,t).data;e({data:a,height:t,width:r})}})},encode:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new Promise(function(e){var i=t.data,o=t.height,a=t.width,h=document.createElement("canvas");h.width=a,h.height=o;for(var f=h.getContext("2d"),u=f.createImageData(a,o),c=u.data,d=0;d<c.length;d++)c[d]=i[d];f.putImageData(u,0,0),e(r(h.toDataURL(n)))})}},i=function(t){if(t instanceof Uint8Array)return new DataView(t.buffer,t.byteOffset,t.byteLength);if(t instanceof ArrayBuffer)return new DataView(t);throw new TypeError("Expected `data` to be an ArrayBuffer or Uint8Array")},o=function(t){var e=i(t);return 0===e.getUint16(0,!0)&&1===e.getUint16(2,!0)};function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(e,r,n){var i,o,a=n.width,h=n.height,f=n.colorDepth,u=n.format;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format=u,this.offset=r,this.depth=f,this.stride=(i=a*this.depth/8,(o=i%4)?i+4-o:i),this.size=this.stride*h,this.data=e.slice(this.offset,this.offset+this.size),this.size!==this.data.byteLength)throw new Error("Truncated bitmap data")}var e,r,n;return e=t,(r=[{key:"get",value:function(t,e,r){var n=this.format.indexOf(r);return 1===this.depth?(this.data[e*this.stride+(t/8|0)]&1<<7-t%8*1)>>7-t%8*1:2===this.depth?(this.data[e*this.stride+(t/4|0)]&3<<6-t%4*2)>>>6-t%4*2:4===this.depth?(this.data[e*this.stride+(t/2|0)]&15<<4-t%2*4)>>>4-t%2*4:this.data[e*this.stride+t*(this.depth/8)+n]}}])&&a(e.prototype,r),n&&a(e,n),t}();function f(t,e){var r=e.width,n=e.height,i=e.colorDepth,o=e.icon;if(32!==i&&24!==i)throw new Error("A color depth of ".concat(i," is not supported"));for(var a=new h(t,0,{width:r,height:n,colorDepth:i,format:"BGRA"}),f=24===i&&o?new h(t,a.offset+a.size,{width:r,height:n,colorDepth:1,format:"A"}):null,u=new Uint8Array(r*n*4),c=0,d=0;d<n;d++)for(var g=0;g<r;g++)u[c++]=a.get(g,n-d-1,"R"),u[c++]=a.get(g,n-d-1,"G"),u[c++]=a.get(g,n-d-1,"B"),u[c++]=32===i?a.get(g,n-d-1,"A"):f&&f.get(g,n-d-1,"A")?0:255;return u}function u(t,e){var r=e.width,n=e.height,i=e.colorDepth,o=e.colorCount,a=e.icon;if(8!==i&&4!==i&&2!==i&&1!==i)throw new Error("A color depth of ".concat(i," is not supported"));for(var f=new h(t,0,{width:o,height:1,colorDepth:32,format:"BGRA"}),u=new h(t,f.offset+f.size,{width:r,height:n,colorDepth:i,format:"C"}),c=a?new h(t,u.offset+u.size,{width:r,height:n,colorDepth:1,format:"A"}):null,d=new Uint8Array(r*n*4),g=0,s=0;s<n;s++)for(var l=0;l<r;l++){var p=u.get(l,n-s-1,"C");d[g++]=f.get(p,0,"R"),d[g++]=f.get(p,0,"G"),d[g++]=f.get(p,0,"B"),d[g++]=c&&c.get(l,n-s-1,"A")?0:255}return d}function c(t){if(19778!==t)throw new Error("Invalid magic byte 0x".concat(t.toString(16)))}function d(t,e){var r=t.getUint8(e+24),n=t.getUint8(e+25);if(0===n)return 1*r;if(2===n)return 3*r;if(3===n)return 1*r;if(4===n)return 2*r;if(6===n)return 4*r;throw new Error("Invalid PNG colorType")}function g(t,e){return t.getUint32(e+16,!1)}function s(t,e){return t.getUint32(e+20,!1)}var l=function(t){var e=i(t);if(e.byteLength<6)throw new Error("Truncated header");if(0!==e.getUint16(0,!0))throw new Error("Invalid magic bytes");var r=e.getUint16(2,!0);if(1!==r&&2!==r)throw new Error("Invalid image type");var n=e.getUint16(4,!0);if(e.byteLength<6+16*n)throw new Error("Truncated image list");return Array.from({length:n},function(t,n){var o=e.getUint8(6+16*n+0),a=e.getUint8(6+16*n+1),h=e.getUint32(6+16*n+8,!0),l=e.getUint32(6+16*n+12,!0),p=2!==r?null:{x:e.getUint16(6+16*n+4,!0),y:e.getUint16(6+16*n+6,!0)};if(function(t,e){return 2303741511===t.getUint32(e+0)&&218765834===t.getUint32(e+4)}(e,l))return{bpp:d(e,l),data:new Uint8Array(e.buffer,e.byteOffset+l,h),height:s(e,l),hotspot:p,type:"png",width:g(e,l)};var w=function(t){var e,r,n,o,a,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=h.width,g=void 0===d?0:d,s=h.height,l=void 0===s?0:s,p=h.icon,w=void 0!==p&&p,v=i(t);w?(e=v.getUint32(0,!0),r=v.getUint32(4,!0)/1|0,n=v.getUint32(8,!0)/2|0,o=v.getUint16(14,!0),a=v.getUint32(32,!0)):(c(v.getUint16(0,!0)),e=14+v.getUint32(14,!0),r=v.getUint32(18,!0),n=v.getUint32(22,!0),o=v.getUint16(28,!0),a=v.getUint32(46,!0)),0===a&&o<=8&&(a=1<<o);var y=0===r?g:r,m=0===n?l:n,b=new Uint8Array(v.buffer,v.byteOffset+e,v.byteLength-e),U=a?u(b,{width:y,height:m,colorDepth:o,colorCount:a,icon:w}):f(b,{width:y,height:m,colorDepth:o,icon:w});return{width:y,height:m,data:U,colorDepth:o}}(new Uint8Array(e.buffer,e.byteOffset+l,h),{width:o,height:a,icon:!0});return{bpp:w.colorDepth,data:w.data,height:w.height,hotspot:p,type:"bmp",width:w.width}})};function p(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function w(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}var v=t,y=w(function(t,e,r){var n=l(t),i=w(function(t){return e===v&&"png"===t.type?Object.assign({buffer:t.data.buffer.slice(t.data.byteOffset,t.data.byteOffset+t.data.byteLength)},t):(n=function(){return p(r.encode(t,e),function(r){return Object.assign(t,{buffer:r,type:e.replace("image/","")})})},(i=function(){if("png"===t.type)return p(r.decode(t.data),function(e){Object.assign(t,{data:e.data,type:"bmp"})})}())&&i.then?i.then(n):n(i));var n,i});return Promise.all(n.map(i))}),m=t;return{isICO:o,parse:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return y(t,e,n)}}});
//# sourceMappingURL=ico.js.map
