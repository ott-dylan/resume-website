!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("styled-components"),require("react"),require("@xstyled/system")):"function"==typeof define&&define.amd?define(["exports","styled-components","react","@xstyled/system"],t):t((e=e||self).xstyled={},e.styled,e.React,e.xstyledSystem)}(this,(function(e,t,r,n){"use strict";var o="default"in t?t.default:t;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var u=function(e){return"string"==typeof e&&""!==e},i=function(e){return"object"==typeof e&&null!==e},c=function(e){return"function"==typeof e};function l(e){return e.reduce((function(e,t){var r=e.length-1,n=e[r];return"string"==typeof n&&"string"==typeof t?e[r]=n+t:e.push(t),e}),[])}function a(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){return n.getBreakpoints({theme:e})}function s(){var e=r.useState(null),t=e[0],n=e[1];return r.useLayoutEffect((function(){function e(){n(window.innerWidth)}return n(window.innerWidth),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}function m(e,t){var r=function(e,t){var r=f(e)[t];return 0===r?null:r}(e,t);return s()>r}function g(e,t){var r=function(e,t){var r=f(e)[t];return 0===r?null:r-.02}(e,t);return s()<r}function h(){return["&&{",n.system,"}"]}h.meta=n.system.meta;var y=function(e){return function(t){var r=Number(t);return e(Number.isNaN(r)?t:r)}},v=/\s+/,p=function(e){return function(t){var r=t.split(v);return function(t){return r.map((function(r){return e(r)(t)})).join(" ")}}},b=y(n.getPx),S=y(n.getSpace),w=p(S),C=y(n.getBorder),x=y(n.getBorderWidth),P=p(x),M=y(n.getSize),j=p(n.getBorderStyle),O={margin:w,"margin-top":S,"margin-bottom":S,"margin-left":S,"margin-right":S,padding:w,"padding-top":S,"padding-bottom":S,"padding-left":S,"padding-right":S,"grid-gap":w,"grid-row-gap":S,"grid-column-gap":S,color:n.getColor,"background-color":n.getColor,"border-color":n.getColor,"border-top-color":n.getColor,"border-right-color":n.getColor,"border-bottom-color":n.getColor,"border-left-color":n.getColor,"outline-color":n.getColor,fill:n.getColor,"border-radius":p(y(n.getRadius)),"border-top-left-radius":p(y(n.getRadius)),"border-top-right-radius":p(y(n.getRadius)),"border-bottom-right-radius":p(y(n.getRadius)),"border-bottom-left-radius":p(y(n.getRadius)),border:C,"border-top":C,"border-right":C,"border-bottom":C,"border-left":C,"border-width":P,"border-top-width":x,"border-right-width":x,"border-bottom-width":x,"border-left-width":x,"outline-width":x,"border-style":j,"border-top-style":n.getBorderStyle,"border-right-style":n.getBorderStyle,"border-bottom-style":n.getBorderStyle,"border-left-style":n.getBorderStyle,"outline-style":n.getBorderStyle,"box-shadow":n.getShadow,"text-shadow":n.getShadow,width:M,height:M,"max-width":M,"max-height":M,"min-width":M,"min-height":M,"z-index":y(n.getZIndex),"font-family":n.getFont,"font-size":y(n.getFontSize),"line-height":y(n.getLineHeight),"font-weight":n.getFontWeight,"letter-spacing":y(n.getLetterSpacing),transition:n.getTransition,top:b,right:b,bottom:b,left:b},T=/(\s*)([^&{}:;\n]+):\s*([^&{}:;\n]+)(\s*);/g,E=/\s*!important\s*/;function B(e){if("string"!=typeof e)return e;for(var t,r=0,n=[],o=function(){var o=t,u=o[1],i=o[2],c=o[3],l=o[4],a=O[i];if(a){var d=E.test(c),f=c.replace(E,"");n.push(e.slice(r,t.index)),n.push((function(e){return""+u+i+": "+a(f)(e)+(d?" !important":"")+";"+l})),r=t.index+t[0].length}};t=T.exec(e);)o();return n.push(e.slice(r,e.length)),n}var k=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(".")},L=function(e){return"--"+e.replace(/\./g,"-")},_=function(e,t){return"var("+L(e)+", "+t+")"};function q(e,t,r){void 0===r&&(r=e);var n=Array.isArray(e)?[]:{};for(var o in e){var l=e[o],a=k(t,o);i(l)?n[o]=q(l,a,r):u(l)?n[o]=_(a,l):c(l)&&(n[o]=_(a,l({theme:r})))}return n}function I(e,t,r,n){for(var o in void 0===r&&(r=e),void 0===n&&(n={value:""}),e){var l=e[o],a=k(t,o);i(l)?I(l,a,r,n):u(l)?n.value+=L(a)+": "+l+";":c(l)&&(n.value+=L(a)+": "+l({theme:r})+";")}return n.value}var R="xstyled-color-mode",z=function(){return"undefined"==typeof window?null:window.localStorage.getItem(R)},N=function(e){return window.localStorage.setItem(R,e)},W=function(e){return"xstyled-color-mode-"+e},F=["light","dark"];var A=function(e){return"(prefers-color-scheme: "+e+")"};function G(e){return e&&e.colors&&e.colors.modes}function Q(e){return e&&(void 0===e.useCustomProperties||e.useCustomProperties)}function H(e){return e.initialColorModeName||"default"}function D(e,t){var r=(void 0===t?{}:t).targetSelector,n=void 0===r?"body":r;if(!G(e))return null;var o=e.colors,u=o.modes,i=I(a(o,["modes"]),"xstyled-colors",e);function c(t){var r=function(e,t){return d({},e,{colors:d({},e.colors,{},e.colors.modes[t])})}(e,t),n=r.colors,o=n.modes;return I(d({},a(n,["modes"]),{},o[t]),"xstyled-colors",r)}return!1!==e.useColorSchemeMediaQuery&&F.forEach((function(e){if(u[e]){var t="@media "+A(e);i+=t+"{"+c(e)+"}"}})),[H(e)].concat(Object.keys(u)).forEach((function(e){var t="&."+W(e);i+=t+"{"+c(e)+"}"})),n+"{"+i+"}"}function U(e){var t=r.useMemo((function(){return function(e){return e&&(void 0===e.useColorSchemeMediaQuery||e.useColorSchemeMediaQuery)}(e)?F.map((function(t){if(!e.colors.modes[t])return null;var r=function(e){if("undefined"==typeof window||void 0===window.matchMedia)return null;var t=A(e);return window.matchMedia(t)}(t);return r?{mode:t,mql:r}:null})).filter(Boolean):[]}),[e]),n=r.useState((function(){var e=t.find((function(e){return e.mql.matches}));return e?e.mode:null})),o=n[0],u=n[1];return r.useEffect((function(){var e=t.filter((function(e){var t=e.mql;return t.addListener&&t.removeListener})).map((function(e){var t=e.mode,r=e.mql,n=function(e){var r=e.matches;u(r?t:function(e){return e===t?null:t})};return r.addListener(n),function(){return r.removeListener(n)}}));return function(){return e.forEach((function(e){return e()}))}})),o}var V="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function Z(e,t){var n=(void 0===t?{}:t).target,o=U(e),u=function(e){return e.defaultColorModeName||H(e)}(e),i=H(e),c=r.useState((function(){return G(e)?u:null})),l=c[0],a=c[1],d=Q(e),f=r.useRef(!1),s=r.useCallback((function(e){f.current=!0,a(e)}),[]);return V((function(){if(G(e)){var t=z();l!==(t||o||u)&&a(t||o||u)}}),[]),V((function(){f.current&&N(l)}),[l]),V((function(){if(!z()){var e=o||u;e!==l&&a(e)}}),[l,o,u]),V((function(){if(d&&(z()||i!==l)){var e=W(l),t=n||document.body;return t.classList.add(e),function(){t.classList.remove(e)}}}),[d,n,l,i]),[l,s]}var J=r.createContext();function K(e){var t=e.ThemeContext,n=e.ThemeProvider,o=e.ColorModeStyle;return function(e){var u=e.children,i=e.target,c=e.targetSelector,l=r.useContext(t);if(!l)throw new Error("[ColorModeProvider] requires ThemeProvider upper in the tree");var f=Z(l,{target:i}),s=function(e,t){var n=r.useMemo((function(){if(!Q(e))return null;if(!G(e))return e;var t=e.colors,r=t.modes,n=a(t,["modes"]);return d({},e,{colors:d({},q(n,"xstyled-colors",e),{modes:r}),__rawColors:e.colors})}),[e]),o=r.useMemo((function(){return Q(e)?null:G(e)?t===H(e)?d({},e,{__colorMode:t}):d({},e,{colors:d({},e.colors,{},e.colors.modes[t]),__colorMode:t,__rawColors:e.colors}):e}),[e,t]);return n||o}(l,f[0]);return r.createElement(r.Fragment,null,r.createElement(o,{targetSelector:c}),r.createElement(n,{theme:s},r.createElement(J.Provider,{value:f},u)))}}function X(e){var t=(void 0===e?{}:e).target;return"(function() { try {\n    var mode = localStorage.getItem('"+R+"');\n    if (mode) "+(void 0===t?"document.body":t)+".classList.add('xstyled-color-mode-' + mode);\n  } catch (e) {} })();"}function Y(){var e=t.css.apply(void 0,arguments),r=l(e);return r.map(B)}function $(e,t){return t||(t=e.slice(0)),e.raw=t,e}function ee(){var e=$(["",""]);return ee=function(){return e},e}function te(e){return function e(t){var r=function(){return t(ee(),Y.apply(void 0,arguments))};return r.attrs=function(r){return e(t.attrs(r))},r.withConfig=function(r){return e(t.withConfig(r))},r}(o(e))}var re=te(n.createSystemComponent(r))(h);function ne(){var e=$(["",""]);return ne=function(){return e},e}te.box=te(re),Object.keys(o).forEach((function(e){te[e]=te(e),te[e+"Box"]=te(re.withComponent(n.createSystemComponent(r,e)))}));var oe=t.createGlobalStyle(ne(),(function(e){return D(e.theme,{targetSelector:e.targetSelector})})),ue=K({ThemeContext:t.ThemeContext,ThemeProvider:t.ThemeProvider,ColorModeStyle:oe});function ie(){return r.useContext(t.ThemeContext)}Object.keys(n).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),Object.defineProperty(e,"ServerStyleSheet",{enumerable:!0,get:function(){return t.ServerStyleSheet}}),Object.defineProperty(e,"StyleSheetConsumer",{enumerable:!0,get:function(){return t.StyleSheetConsumer}}),Object.defineProperty(e,"StyleSheetContext",{enumerable:!0,get:function(){return t.StyleSheetContext}}),Object.defineProperty(e,"StyleSheetManager",{enumerable:!0,get:function(){return t.StyleSheetManager}}),Object.defineProperty(e,"ThemeConsumer",{enumerable:!0,get:function(){return t.ThemeConsumer}}),Object.defineProperty(e,"ThemeContext",{enumerable:!0,get:function(){return t.ThemeContext}}),Object.defineProperty(e,"ThemeProvider",{enumerable:!0,get:function(){return t.ThemeProvider}}),Object.defineProperty(e,"isStyledComponent",{enumerable:!0,get:function(){return t.isStyledComponent}}),Object.defineProperty(e,"keyframes",{enumerable:!0,get:function(){return t.keyframes}}),Object.defineProperty(e,"withTheme",{enumerable:!0,get:function(){return t.withTheme}}),e.Box=re,e.ColorModeProvider=ue,e.createGlobalStyle=function(){return t.createGlobalStyle([Y.apply(void 0,arguments)])},e.css=Y,e.default=te,e.getColorModeInitScriptElement=function(e){return r.createElement("script",{key:"xstyled-color-mode-init",dangerouslySetInnerHTML:{__html:X(e)}})},e.getColorModeInitScriptTag=function(e){return"<script>"+X(e)+"<\/script>"},e.useBreakpoint=function(){return e=ie(),t=f(e),n=s(),r.useMemo((function(){return Object.keys(t).reverse().find((function(e){return n>t[e]}))||null}),[t,n]);var e,t,n},e.useBreakpoints=function(){return f(ie())},e.useColorMode=function(){var e=r.useContext(J);if(!e)throw new Error("[useColorMode] requires the ColorModeProvider component");return e},e.useDown=function(e){return g(ie(),e)},e.useTheme=ie,e.useUp=function(e){return m(ie(),e)},e.useViewportWidth=s,Object.defineProperty(e,"__esModule",{value:!0})}));
