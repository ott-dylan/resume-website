{"ast":null,"code":"'use strict';\n\nconst {\n  MIME_PNG\n} = require('../mime');\n\nconst dataURLToArrayBuffer = dataURL => {\n  const string = atob(dataURL.replace(/.+,/u, ''));\n  const view = new Uint8Array(string.length);\n\n  for (let i = 0; i < string.length; i++) {\n    view[i] = string.charCodeAt(i);\n  }\n\n  return view.buffer;\n};\n\nconst Image = {\n  /**\n   * Create imageData from image.\n   *\n   * @access private\n   * @param {ArrayBuffer} arrayBuffer - Image buffer.\n   * @returns {ImageData} ImageData.\n   */\n  decode(arrayBuffer) {\n    return new Promise(resolve => {\n      // eslint-disable-next-line node/no-unsupported-features/node-builtins\n      const url = URL.createObjectURL(new Blob([arrayBuffer]));\n      const img = document.createElement('img');\n      img.src = url;\n\n      img.onload = () => {\n        const {\n          naturalHeight: height,\n          naturalWidth: width\n        } = img;\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        const {\n          data\n        } = ctx.getImageData(0, 0, width, height);\n        resolve({\n          data,\n          height,\n          width\n        });\n      };\n    });\n  },\n\n  /**\n   * Create image from imgData.data.\n   *\n   * @access private\n   * @param {object} image - Data.\n   * @param {number} image.width - Image width.\n   * @param {number} image.height - Image height.\n   * @param {Uint8ClampedArray} image.data - Same as imageData.data.\n   * @param {string} [mime=image/png] - MIME type.\n   * @returns {ArrayBuffer} Image.\n   */\n  encode(image, mime = MIME_PNG) {\n    return new Promise(resolve => {\n      const {\n        data,\n        height,\n        width\n      } = image;\n      const canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n      const ctx = canvas.getContext('2d');\n      const imageData = ctx.createImageData(width, height);\n      const dataData = imageData.data;\n\n      for (let i = 0; i < dataData.length; i++) {\n        dataData[i] = data[i];\n      }\n\n      ctx.putImageData(imageData, 0, 0);\n      resolve(dataURLToArrayBuffer(canvas.toDataURL(mime)));\n    });\n  }\n\n};\nmodule.exports = Image;","map":{"version":3,"sources":["/Users/dylanott/Documents/GitHub/dylanott-website/resume-website/node_modules/icojs/src/browser/image.js"],"names":["MIME_PNG","require","dataURLToArrayBuffer","dataURL","string","atob","replace","view","Uint8Array","length","i","charCodeAt","buffer","Image","decode","arrayBuffer","Promise","resolve","url","URL","createObjectURL","Blob","img","document","createElement","src","onload","naturalHeight","height","naturalWidth","width","canvas","ctx","getContext","drawImage","data","getImageData","encode","image","mime","imageData","createImageData","dataData","putImageData","toDataURL","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nconst { MIME_PNG } = require('../mime');\n\nconst dataURLToArrayBuffer = dataURL => {\n  const string = atob(dataURL.replace(/.+,/u, ''));\n  const view = new Uint8Array(string.length);\n  for (let i = 0; i < string.length; i++) {\n    view[i] = string.charCodeAt(i);\n  }\n  return view.buffer;\n};\n\nconst Image = {\n  /**\n   * Create imageData from image.\n   *\n   * @access private\n   * @param {ArrayBuffer} arrayBuffer - Image buffer.\n   * @returns {ImageData} ImageData.\n   */\n  decode (arrayBuffer) {\n    return new Promise(resolve => {\n      // eslint-disable-next-line node/no-unsupported-features/node-builtins\n      const url = URL.createObjectURL(new Blob([arrayBuffer]));\n      const img = document.createElement('img');\n      img.src = url;\n      img.onload = () => {\n        const { naturalHeight: height, naturalWidth: width } = img;\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        const { data } = ctx.getImageData(0, 0, width, height);\n        resolve({\n          data,\n          height,\n          width\n        });\n      };\n    });\n  },\n  /**\n   * Create image from imgData.data.\n   *\n   * @access private\n   * @param {object} image - Data.\n   * @param {number} image.width - Image width.\n   * @param {number} image.height - Image height.\n   * @param {Uint8ClampedArray} image.data - Same as imageData.data.\n   * @param {string} [mime=image/png] - MIME type.\n   * @returns {ArrayBuffer} Image.\n   */\n  encode (image, mime = MIME_PNG) {\n    return new Promise(resolve => {\n      const { data, height, width } = image;\n      const canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n      const ctx = canvas.getContext('2d');\n      const imageData = ctx.createImageData(width, height);\n      const dataData = imageData.data;\n      for (let i = 0; i < dataData.length; i++) {\n        dataData[i] = data[i];\n      }\n      ctx.putImageData(imageData, 0, 0);\n      resolve(dataURLToArrayBuffer(canvas.toDataURL(mime)));\n    });\n  }\n};\n\nmodule.exports = Image;\n"]},"metadata":{},"sourceType":"script"}